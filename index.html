<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />

  <!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame 
       Remove this if you use the .htaccess -->
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

  <title>TRACX Online Simulator</title>
  <meta name="description" content="" />
  <meta name="author" content="Caspar Addyman" />
  <meta name="viewport" content="width=device-width; initial-scale=1.0" />
  <link rel="stylesheet" href="style.css" type="text/css" />
  <!-- Replace favicon.ico & apple-touch-icon.png in the root of your domain and delete these references -->
  <link rel="shortcut icon" href="/favicon.ico" />
  <link rel="apple-touch-icon" href="/apple-touch-icon.png" />
  
  <!-- The javascript libraries we will use -->
  <script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js?ver=1.6.4'></script>
  <script type='text/javascript' src='lib/jquery.jqplot.min.js'></script>
  <link rel="stylesheet" href="lib/jquery.jqplot.min.css" type="text/css" />
  <link rel="stylesheet" href="lib/diQuery-collapsiblePanel.css" type="text/css" />
  
  <script type='text/javascript' src='lib/plugins/jqplot.barRenderer.min.js'></script>
  <script type='text/javascript' src='lib/plugins/jqplot.categoryAxisRenderer.min.js'></script>
  <script type="text/javascript" src="lib/plugins/jqplot.canvasTextRenderer.min.js"></script>
  <script type='text/javascript' src='lib/plugins/jqplot.canvasAxisLabelRenderer.min.js'></script>
  <script type='text/javascript' src='lib/plugins/jqplot.pointLabels.min.js'></script>
  <script type='text/javascript' src='lib/jquery.qtip-1.0.0-rc3.min.js'></script>
  <script type='text/javascript' src='lib/diQuery-collapsiblePanel.js'></script>
  <script type='text/javascript' src='lib/sylvester.js'></script>
 
  <!-- The TRACX simulator itself --> 
  <script type='text/javascript' src='tracx.js'></script>
</head>

<body>
  <div>
    <header>
      <h1>TRACX simulator</h1> 
    </header>
    <form id="LearnParams">
    	<fieldset><legend>Step 1 - Choose data:</legend>
    	<h3>Training data</h3>
    	<label for="stored">Existing dataset</label>
        <select id="simulationSelect">
        	<option>1. Saffran et al., 1996</option>
        	<option>2. Aslin et al., 1998</option>
        	<option>3. Perruchet &amp; Desaulty, 2008 (Forward TPs)</option>
        	<option>4. Perruchet &amp; Desaulty, 2008 (Backward TPs)</option>
        	<option>5. #NA# Giroux &amp; Rey, 2009</option>
        	<option>6. #NA# Frank et al., 2010 -  Experiment 1</option>
        	<option>7. #NA# Frank et al., 2010 -  Experiment 3</option>
        	<option>8. #NA# Brent &amp; Cartwright, 1996,</option>
        	<option>9 &amp; 10 - Not available </option>
        	<option>11. French, Addyman &amp; Mareschal, 2011 </option>
        	<option selected="selected">12. Kirkham,Slemmer &amp; Johnson, 2012 </option>
        	
        </select>        
        <label for="dataselection">Or select file</label>
     <input type="file" id="userDataFiles" multiple />
<output id="trainingstring"></output><br/>
<textarea id="trainingData" class="required" rows="5" cols="60">babefefcdabefabababefcdefefcdefabefabefababefcdefabcdefcdcdcdefefcdcdabefabefcdefcdcdababefcdabcdefcdefababcdabefefcdabefabcdefcdababefcdefcdefabefefcdcdcdcdefefababababefcdcdefefc</textarea><br/>
<em>Each training sentence should begin on a new line.</em>

<h3>Test items</h3>
<table summary="Test items"><tr>
	<td>Words:</td>
	<td><textarea id="testWords" class="required" rows="1" cols="50">ab,cd,ef</textarea></td>
</tr><tr>
	<td>Part Words:</td>
	<td><textarea id="testPartWords"  rows="1" cols="50">bc,de,fa</textarea></td>
</tr><tr>
	<td>Non Words:</td>
	<td><textarea id="testNonWords" rows="1" cols="50">ad,bf,fd</textarea></td>
</tr>
</table><br/>

<h3>Track learning</h3>     	<input type="checkbox" id="trackingFlag" checked="unchecked"/> Track<br/>

<table summary="Track learning"><tr>
	<td>Test bigrams:</td>
	<td><textarea id="trackingBigrams" class="required" rows="1" cols="50">ab,ad</textarea></td>
</tr><tr>
	<td>Test network every N steps:</td>
	<td><textarea id="trackingInterval"  rows="1" cols="50">10</textarea></td>
</table><br/>
<em>Test items should be seperated by commas.</em>
<div id="debug"></div>
</fieldset>
    <fieldset id="paramsform">
        <legend>Step 2: Set Network Parameters</legend>
        <table summary="Network Parameters">
            <tr>
                <td>Learning Rate</td>
                <td> <input type="text" id="learningRate" class="required"  value="0.04"/></td>
            </tr><tr>
                <td>Recognition Criterion</td>
                <td><input type="text" id="recognitionCriterion" class="required"  value="0.4"/></td></tr>
            <tr>
                <td>Reinforcement Threshold</td>
                <td><input type="text" id="reinforcementThreshold" class="required" value="0.25"/></td></tr>
            <tr>
                <td>Momentum </td><td><input type="text" id="momentum" class="required" value="0.0"/></td></tr>
            <tr>
                <td>Sentence repetitions</td><td><input type="text" id="sentenceRepetitions" class="required" value="1"/></td></tr>
            <tr>
                <td>Number of subjects</td><td><input type="text" id="numberSubjects" class="required" value="1"/></td></tr>
            <tr>
                <td>Temperature</td><td><input type="text" id="temperature" class="required" value="1"/></td></tr>
            <tr>
                <td>Fahlman Offset</td><td><input type="text" id="fahlmanOffset" class="required" value="0.1"/></td></tr>
            <tr>
                <td>Bias value</td>
                <td><input type="text" id="bias" class="required" title="Bias" value="-1"/></td>
            </tr>
        </table>
	</fieldset>
    </form>
    <fieldset>
        <legend>Step 3: Run Simulator</legend>	
		<p id="currentStep"><em>Training Step 0</em></p>
    	<input type="button" id="initialize" value="Reset" />
    	<input type="button" id="stepPlus1" value="Step +1" />
    	<input type="button" id="stepPlus1percent" value="Step +1%" />
    	<input type="button" id="stepPlus10" value="Step +10" />
    	<input type="button" id="stepPlus10percent" value="Step +10%" />
		<input type="button" id="calculate" value="Run.." /><br/>
    	<input type="checkbox" id="graphResults" checked="checked"/> Graph outputs   
		<input type="checkbox" id="graphActivations" checked="checked"/> Graph activations<br/>
		<div id="myResult"></div>
		<div class="collapsibleContainer" title="Tracx internal parameters (click to show/hide)">
			<div id="extraInfo">The internal parameters used by the network will appear here. </div>
		</div>
		<fieldset><legend>Graphic Output</legend>	
	<div id="chartOutputError" style="height:400px;width:600px "></div>
	<div id="chartTrackLearning" style="height:400px;width:600px "></div>
	</fieldset>
		<fieldset><legend>Network Activations</legend>
			<table><tr>
					<td><div id="chartInput1" style="height:150px;width:240px ">INPUT 1</div></td>
					<td><div id="chartInput2" style="height:150px;width:240px ">INPUT 2</div></td>
				</tr>
				<tr>
					<td align="center" colspan="2"><div id="chartHidden" style="height:150px;width:240px ">HIDDEN</div></td>
				</tr>
				<tr>
					<td><div id="chartOutput1" style="height:150px;width:240px ">OUTPUT 1</div></td>
					<td><div id="chartOutput2" style="height:150px;width:240px ">OUTPUT 2</div></td>
				</tr>
			</table>
		</fieldset>
	</fieldset>

		
<script type='text/javascript'>
	//things to do once document has finished loading
	$(document).ready(function() 
	{
		//allow show/hide the extra information coming back from tracx.js 
		$(".collapsibleContainer").collapsiblePanel();
		// $(".collapsibleContainerContent", $(this).parent()).slideToggle();
       	// $(".collapsibleContainerContent", $(this).parent()).slideToggle();

		/******************************************************
		 * SOME HELP AND DESCRIPTION OF INPUTS AND PARAMETERS *
		 * APPEARS AS 'TOOLTIPS' WHEN USER HOVERS MOUSE OVER  *
		 * FIELDS OR BUTTONS                                  *
		 ******************************************************/
	   	$('#simulationSelect').qtip({
	    	content: 'Click to select preset data.',
	    	style: 'cream'
		});
	   	$('#trainingData').qtip({
	    	content: 'Training Data<br/>A series of strings of characters, where each character represents one syllable or phoneme and each string represents one sentence or utterance. Strings are seperated by carriage returns.',
	    	style: 'cream'
		});
	   	$('#testWords').qtip({
	    	content: 'Words from the training corpus. The trained network is tested for it\'s output error for each word individually. Words are seperated by commas.',
	    	style: 'cream'
		});
	   	$('#testPartWords').qtip({
	    	content: 'Sequences of tokens encountered during training but which cross notional word boundaries.',
	    	style: 'cream'
		});
	   	$('#testNonWords').qtip({
	    	content: 'Sequences of tokens that were not encountered during training.',
	    	style: 'cream'
		});
	   	$('#learningRate').qtip({
	    	content: 'By how much do we adjust the weight matrices on each cycle of backpropogation.<br/><em>Defaults:<br/>Artificial grammar: 0.04<br/>Real world corpus: 0.004</em>',
	    	style: 'cream'
		});
		$('#recognitionCriterion').qtip({
	    	content: 'Maximum output error must be below this value for all nodes before network is deemed to recognise an input pair. When an input pair is recognised the hidden unit activations are passed back as an input for the next step.<br/><em>Default: 0.3</em>',
	    	style: 'cream'
		});
		$('#reinforcementThreshold').qtip({
	    	content: 'Learning is weaker for hidden representations. Therefore we only backpropogate errors this proportion of the time (determined probablistically by <em>Math.random() < ReinforcementThreshold</em>) .<br/><em>Default: 0.25</em>',
	    	style: 'cream'
		});
		$('#momentum').qtip({
	    	content: 'Standard backpropogation momentum parameter.<br/><em>Default: 0.0</em>',
	    	style: 'cream'
		});
		$('#sentenceRepetitions').qtip({
	    	content: 'How often do we repeat each sentence/utterance in the learning corpus.<br/><em>Default: 6</em>',
	    	style: 'cream'
		});
		$('#numberSubjects').qtip({
	    	content: 'How many times do we run the full simulation and test?<br/><em>Default: 1</em>',
	    	style: 'cream'
		});
		$('#temperature').qtip({
	    	content: 'What is the slope of the hyperbolic tanget activation function?<br/><em>Default: 1</em>',
	    	style: 'cream'
		});
		$('#fahlmanOffset').qtip({
	    	content: 'The Fahlman offset speeds up learning. It is discussed in<br/><font size="small">Fahlman, S. E. (1988). Faster-learning variations on back-propagation: An empirical study. In D. S. Touretzky, G. E. Hinton, & T. J. Sejnowski (Eds.), Proceedings of the 1988 Connectionist Models Summer School (pp. 38-51). Los Altos, CA: Morgan Kaufmann</font><br/><em>Default: 0.04</em>',
	    	style: 'cream'
		});
		$('#bias').qtip({
	    	content: 'Bias node activation - An node with this activation is always added to the set of inputs and to the set of hidden units.<br/><em>Default: -1</em>',
	    	style: 'cream'
		});
		$('#calculate').qtip({
	    	content: 'For each subject we create a new untrained network by randomly initialising a new set of weights matrices. We train this network on the training data and then test with each of the word, part-word and non-word stimuli. Progress is shown below and mean results are plotted graphically.',
	    	style: 'cream'
		});
	});
	function sendValue(str){
		$.post("ajax.php", { sendToValue: str },
			function(data){
				console.log('ajax get simulationSelect return');
			    //fill the track learning items
			    $("#trackingFlag").val(data.tracklearning.trackingFlag);
			    $("#trackingBigrams").val(data.tracklearning.trackingBigram.join(","));
			    $("#trackingInterval").val(data.tracklearning.trackingInterval);
			    
			    //fill in the trainingData
			    $("#trainingData").val(data.trainingdata.sentence.join('\n'));
			    //fill in the test items
			    $("#testWords").val(data.testitems.word.join(","));
			    $("#testPartWords").val(data.testitems.partword.join(","));
			    $("#testNonWords").val(data.testitems.nonword.join(","));
			    //fill in the learning params
			    for(p in data.params){
			    	$("#"+p).val(data.params[p]);
			    }

 			}, 
			"json");
	}
	
	//add an event to fetch simulation data from the website
 	$('#simulationSelect').change(function(){
		//get simulation data by id number
		var temp = $(this).val().split(".");
		var simulationNumber=temp[0] -1;
//		var simulationName =["saffran","aslin","perruchetfwd","perruchetbkwd","giroux","frank1","frank3","brent","notavailable","notavailable","french","kirkham"];
		var simulationName =["saffran","aslin","perruchetfwd","perruchetbkwd","notavailable","notavailable","notavailable","notavailable","notavailable","notavailable","french","kirkham"];
		sendValue(simulationName[simulationNumber]);	
	});
	


	//function to load the data from a file on the computer
	function handleFileSelect(evt) {
	    var files = evt.target.files; // FileList object
		//clear old training data
		$("textarea#trainingData").text("");
		// Loop through the FileList and save load.
		for (var i = 0, f; f = files[i]; i++) {
	
	      var reader = new FileReader();
	      // Closure to capture the file information.
	      reader.onload = (function(theFile) {
	        return function(e) {
	        console.log(theFile.name);
	        console.log('reader.onload e.target.result:' + e.target.result);
	        $("output#list").append(theFile.name);       
	        $("textarea#trainingData").append(e.target.result);
	    };
	      })(f);
	
	      // Read in the image file as a data URL.	
	      reader.readAsText(f);
	    }
	}
	//tell page what to do when use selects a data file.
	document.getElementById('userDataFiles').addEventListener('change', handleFileSelect, false);
        
   	function initialiseNetwork(){
   		if (TRACX === null){
 			$('#myResult').html("Tracx Simulator not found, try reloading the page or contact us");
 			return;
 		}else{
 			$('#myResult').html("Tracx Simulator Version <strong>" + TRACX.Version + "</strong>, " + TRACX.VersionDate + "<br/>");
 		}
 		if ($("#trainingData").val().length < 2){
 			$('#myResult').append("Please provide some training data.<br/>");
 			return;
 		}
 		//clear the old graphs
 		$('#chartOutputError').empty();  
		$('#chartTrackLearning').empty();  
		$('#myResult').append("Loading training data...<br/>");
		TRACX.setTrainingData($("#trainingData").val());
		//fill in the params from input form
		var networkParams = {};
		$('#paramsform input').each(function(index) {
			networkParams[this.id] = parseFloat($(this).val());
		});
		TRACX.setParameters(networkParams);
		$('#extraInfo').html("<em>Network Parameters</em><br/>");
		$('#extraInfo').append(JSON.stringify(networkParams) + "<br/>");
		
		//encode all the input tokens
		var encodings = TRACX.getInputEncodings();
		$('#extraInfo').append("<em>Token / phoneme encodings</em><br/>");
		for(enc in encodings){
			$('#extraInfo').append("<strong>" + enc + ":</strong> "+ encodings[enc] + "<br/>");
		}
		
	    $('#extraInfo').append("<em>Training:</em><br/>");
        var loggingLevel = 1;
        
        //do we track learning as we go along?
        TRACX.setTrackingData({ flag:$("#trackingFlag").val(),
        						bigrams:$("#trackingBigrams").val(),
        						interval:$("#trackingInterval").val()        	
      						});		
        
        
        //send the test data to the TRACX object
        TRACX.setTestData({	Words:$("#testWords").val(),
							PartWords:$("#testPartWords").val(),
							NonWords:$("#testNonWords").val()
						 });
		TRACX.reset();
		$('#currentStep').html("<em style='font-size:3ex;'>Training Step: 0</em>");
   	}
        
	//function to run when calculate button is pressed
	function handleCalculate(steps) {
	console.log('handleCalculate');	
 	// try{
 		if (TRACX === null){
 			$('#myResult').html("Tracx Simulator not found, try reloading the page or contact us");
 			return;
 		}
 		if (!TRACX.getCurrentStep() || TRACX.getCurrentStep() < 0 ){
	 		initialiseNetwork();
 		}
 		
 		if (steps < 0){
	 		//////////////////////////////////						 
	        //THIS LINE DOES ALL THE HARD WORK
	        var ret = TRACX.runFullSimulation(function(importance, message) {
			    // this anonymous function will run when the progress callback is called
			    if (importance > 0){
				    $('#myResult').append(message);
			    }else{
			    	$('#extraInfo').append(message);
			    }
			});
			if (!ret.trainSuccess){
				 $('#myResult').append("<em>***Training failed***</em>");
				return;
			}
			/////////////////////////////////////// 			
 		}else{
 			//////////////////////////////////						 
	        //THIS LINE DOES ALL THE HARD WORK
	        var ret = TRACX.stepThroughTraining(steps,function(importance, message) {
			    // this anonymous function will run when the progress callback is called
			    if (importance > 0){
				    $('#myResult').append(message);
			    }else{
			    	$('#extraInfo').append(message);
			    }
			});
			if (!ret.trainSuccess){
				 $('#myResult').append("<em>***Training failed***</em>");
				return;
			}
 		}
		$('#currentStep').html("<em style='font-size:3ex;'>Training Step: " + TRACX.getCurrentStep() + "</em>");

 		//clear the old graphs
 		$('#chartOutputError').empty();  
		$('#chartTrackLearning').empty();  
		var graphVals = [];
    	$('#myResult').append("<br/><em>Testing:</em><br/>");
        $('#myResult').append("Words :" + $("#testWords").val() + "<br/>");
		if (ret.Words.mean){			
	    	$('#myResult').append(ret.Words.mean.toFixed(3) + " (+/- " + ret.Words.sd.toFixed(3) + ")<br/>");
	        graphVals.push([ret.Words.mean]);
       	}else{
       		$('#myResult').append("-<br/>");
	        graphVals.push([0]);      	
       	}
        $('#myResult').append("Part Words :" + $("#testPartWords").val() + "<br/>");
    	if (ret.PartWords.mean){			
	    	$('#myResult').append(ret.PartWords.mean.toFixed(3) + " (+/- " + ret.PartWords.sd.toFixed(3) + ")<br/>");
	        graphVals.push([ret.PartWords.mean]);
       	}else{
       		$('#myResult').append("-<br/>");
	        graphVals.push([0]);      	
       	}
        $('#myResult').append("Non Words :" + $("#testNonWords").val() + "<br/>");
    	if (ret.NonWords.mean){			
	    	$('#myResult').append(ret.NonWords.mean.toFixed(3) + " (+/- " + ret.NonWords.sd.toFixed(3) + ")<br/>");
	        graphVals.push([ret.NonWords.mean]);
       	}else{
       		$('#myResult').append("-<br/>");
	        graphVals.push([0]);      	
       	}
		console.log($("#graphResults").is(':checked'));
       	if ($("#graphResults").is(':checked')){
	      	plotBarGraph(graphVals);
	      	if($("#trackingFlag").val()){
	      		plotLearning(ret.trackingSteps, ret.trackingOutputs);
	      	}
       	}
       	plotActivations('ab');
       	//allow show/hide the extra information coming back from tracx.js 
		//$(".collapsibleContainer").collapsiblePanel();
       	
    // }
    // catch(err){
		// $('#myResult').append("Calculation error: " + err.message);
    // }    
    }
	//add a click event to the calculate button
 	$('#initialize').click(initialiseNetwork);
 	$('#calculate').click(function() {handleCalculate(-1);});
 	$('#stepPlus1').click(function() {handleCalculate(1);});
 	$('#stepPlus1percent').click(function() {handleCalculate("1%");});
 	$('#stepPlus10').click(function() {handleCalculate(10);});
 	$('#stepPlus10percent').click(function() {handleCalculate("10%");});
 	      
	function plotBarGraph(WordErrorScores){
	try{
	    // Can specify a custom tick Array.
	    // Ticks should match up one for each y value (category) in the series.
	    var ticks = ['Test Items'];
	    $('chartOutputError').empty();  
	    var plot1 = $.jqplot('chartOutputError', WordErrorScores, {
	    	  // Give the plot a title.
			  title: 'Mean error scores per test item type',
	        // The "seriesDefaults" option is an options object that will
	        // be applied to all series in the chart.
	        seriesDefaults:{
	            renderer:$.jqplot.BarRenderer,
	            rendererOptions: {fillToZero: true}
	        },
	        // Custom labels for the series are specified with the "label"
	        // option on the series option.  Here a series option object
	        // is specified for each series.
	        series:[
	            {label:'Word Errors'},
	            {label:'Part Word Errors'},
	            {label:'Non Word Errors'}
	        ],
	        // Show the legend and put it inside the grid
	        legend: {
	            show: true,
	            placement: 'outsideGrid'
	        },
	        axes: {
	            // Use a category axis on the x axis and use our custom ticks.
	            xaxis: {
	                renderer: $.jqplot.CategoryAxisRenderer,
	                ticks: ticks,
	                label: 'Item Types',
					labelRenderer: $.jqplot.CanvasAxisLabelRenderer
	            },
	            // Pad the y axis just a little so bars can get close to, but
	            // not touch, the grid boundaries.  1.2 is the default padding.
	            yaxis: {
					min:0,
	                pad: 1.05,
	   				label: "Mean Error",
					labelRenderer: $.jqplot.CanvasAxisLabelRenderer
   		            }
	        }
	    });
	    }
    catch(err){
		$('#myResult').append("Graphing error: " + err.message);
    }     
	}
	
	function plotLearning(trackingSteps, trackingOutputs){
		var serieslabels = [];
		var seriesdata = []
		for(x in trackingOutputs){
			serieslabels.push({label:x});
			seriesdata.push(trackingOutputs[x]);
		}
	    var plot2 = $.jqplot ('chartTrackLearning',seriesdata, {
			  // Give the plot a title.
			  title: 'Bigram error over time',
			  axesDefaults: {
			    labelRenderer: $.jqplot.CanvasAxisLabelRenderer
			  },
 	          legend: {
		            show: true,
		            placement: 'outsideGrid'
		      },
			  series:serieslabels,
			  axes: {
			  	xaxis: {
			 		label: "Number  of training items",
  			  		labelRenderer: $.jqplot.CanvasAxisLabelRenderer,
			  		ticks: trackingSteps,
			  		pad: 0
					},
				yaxis: {
			  		label: "Mean Error",
			  		labelRenderer: $.jqplot.CanvasAxisLabelRenderer
			    	}
				}
	    });
    }
    //mini bar graphs of the input, hidden and output activations for this step.
    function plotActivations(bigram){
    	if (!TRACX){
    		return;
    	}
    	$('chartInput1').empty();  
    	$('chartInput2').empty();  
    	$('chartHidden').empty();  
    	$('chartOutput1').empty();  
    	$('chartOutput2').empty();  
	    ret = TRACX.testString(bigram);
	    
	    var plotInput1 = $.jqplot('chartInput1', ret.activations.In.elements, 
	    	{	title: 'Input 1',
	        	seriesDefaults:{renderer:$.jqplot.BarRenderer,rendererOptions: {fillToZero: true}},
	        	legend: {show: false},
	        	axes: {
	            xaxis: {
	                renderer: $.jqplot.CategoryAxisRenderer,
	                label: 'Item Types',
					labelRenderer: $.jqplot.CanvasAxisLabelRenderer
	            },
	            yaxis: {
					min:-1.05,
	                max:1.05,
	                pad: 1.05,
	   				label: "Activation",
					labelRenderer: $.jqplot.CanvasAxisLabelRenderer
   		            }
	        	}
	    	});
	    var plotInput2 = $.jqplot('chartInput2', ret.activations.In.elements, 
	    	{	title: 'Input 2',
	        	seriesDefaults:{renderer:$.jqplot.BarRenderer,rendererOptions: {fillToZero: true}},
	        	legend: {show: false},
	        	axes: {
	            xaxis: {
	                renderer: $.jqplot.CategoryAxisRenderer,
	                label: 'Item Types',
					labelRenderer: $.jqplot.CanvasAxisLabelRenderer
	            },
	            yaxis: {
					min:-1.05,
	                max:1.05,
	                pad: 1.05,
	   				label: "Activation",
					labelRenderer: $.jqplot.CanvasAxisLabelRenderer
   		            }
	        	}
	    	});
	    var plotHidden = $.jqplot('chartHidden', ret.activations.Hid.elements, 
	    	{	title: 'Hidden',
	        	seriesDefaults:{renderer:$.jqplot.BarRenderer,rendererOptions: {fillToZero: true}},
	        	legend: {show: false},
	        	axes: {
	            xaxis: {
	                renderer: $.jqplot.CategoryAxisRenderer,
	                label: 'Item Types',
					labelRenderer: $.jqplot.CanvasAxisLabelRenderer
	            },
	            yaxis: {
					min:-1.05,
	                max:1.05,
	                pad: 1.05,
	   				label: "Activation",
					labelRenderer: $.jqplot.CanvasAxisLabelRenderer
   		            }
	        	}
	    	});
	   	var plotOutput1 = $.jqplot('chartOutput1', ret.activations.Out.elements, 
	    	{	title: 'Output 1',
	        	seriesDefaults:{renderer:$.jqplot.BarRenderer,rendererOptions: {fillToZero: true}},
	        	legend: {show: false},
	        	axes: {
	            xaxis: {
	                renderer: $.jqplot.CategoryAxisRenderer,
	                label: 'Item Types',
					labelRenderer: $.jqplot.CanvasAxisLabelRenderer
	            },
	            yaxis: {
					min:-1.05,
	                max:1.05,
	                pad: 1.05,
	   				label: "Activation",
					labelRenderer: $.jqplot.CanvasAxisLabelRenderer
   		            }
	        	}
	    	});
	   var plotOutput2 = $.jqplot('chartOutput2', ret.activations.Out.elements, 
	    	{	title: 'Output 2',
	        	seriesDefaults:{renderer:$.jqplot.BarRenderer,rendererOptions: {fillToZero: true}},
	        	legend: {show: false},
	        	axes: {
	            xaxis: {
	                renderer: $.jqplot.CategoryAxisRenderer,
	                label: 'Item Types',
					labelRenderer: $.jqplot.CanvasAxisLabelRenderer
	            },
	            yaxis: {
					min:-1.05,
	                max:1.05,
	                pad: 1.05,
	   				label: "Activation",
					labelRenderer: $.jqplot.CanvasAxisLabelRenderer
   		            }
	        	}
	    	});
	    	
    }
	</script>

    <footer>
    For a guide on how to step through the TRACX simulator code <a href="debugmode.html" target="_blank">click here</a>.<br/>
    To report a bug, <a href="https://github.com/YourBrain/TRACX-Web/issues/new"target="_blank">click here</a><br/>
    Source Code: <a href="https://github.com/YourBrain/TRACX-Web" target="_blank">github.com/YourBrain/TRACX-Web</a>
     <p>&copy; <a href="mailto:C.Addyman@bbk.ac.uk">Caspar Addyman</a> &amp; Robert M. French, 2011</p>
    </footer>
  </div>
</body>
</html>
